<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.qiniuai.chat.web.mapper.MessageMapper">

    <insert id="batchInsertMessage">
        INSERT INTO messages (conversation_id, role, content, send_time)
        VALUES
        <foreach collection="list" item="msg" separator=",">
            (#{msg.conversationId}, #{msg.role}, #{msg.content}, #{msg.sendTime})
        </foreach>
    </insert>

    <!-- 在MessageMapper.xml中添加 -->
    <update id="updateAudioUrl">
        UPDATE messages
        SET url = #{url}
        WHERE id = #{id}
    </update>

</mapper>